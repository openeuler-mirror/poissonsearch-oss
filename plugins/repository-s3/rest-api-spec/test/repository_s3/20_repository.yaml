# Integration tests for Repository S3 component
#
"S3 repository can be registereed":
    - skip:
        version: "all"
        reason:  does not work on java9, see https://github.com/aws/aws-sdk-java/pull/432
    - do:
        snapshot.create_repository:
          repository: test_repo_s3_1
          verify: false
          body:
            type: s3
            settings:
              bucket: "my_bucket_name"
              access_key: "AKVAIQBF2RECL7FJWGJQ"
              secret_key: "vExyMThREXeRMm/b/LRzEB8jWwvzQeXgjqMX+6br"

    # Get repositry
    - do:
        snapshot.get_repository:
          repository: test_repo_s3_1

    - is_true: test_repo_s3_1
    - is_true: test_repo_s3_1.settings.bucket
    - is_false: test_repo_s3_1.settings.access_key
    - is_false: test_repo_s3_1.settings.secret_key
