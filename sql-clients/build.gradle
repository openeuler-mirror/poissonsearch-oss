description = 'Elasticsearch SQL Clients'

import org.gradle.plugins.ide.eclipse.model.*;

subprojects {
  apply plugin: 'elasticsearch.build'
  apply plugin: "java"
  apply plugin: 'eclipse'

  sourceSets.test.resources.srcDirs = ["src/test/resources", "src/test/java"]

  // Massaging Eclipse
  eclipse {
    classpath.file {
      whenMerged { cp ->
        def con = entries.find { e ->
          e.kind == "con" && e.toString().contains("org.eclipse.jdt.launching.JRE_CONTAINER")
        }
        ((AbstractClasspathEntry) con).accessRules.add(new AccessRule("accessible", "com/sun/net/httpserver/*"))

        entries.unique { a, b ->
          return a.path.compareTo(b.path)
        }
        entries.removeAll { it.path.endsWith('.pom') }
      }
    }
  }

  dependencies {
    testCompile("junit:junit:${versions.junit}") {
      exclude group:'org.hamcrest', module:'hamcrest-core'
    }
    testCompile "org.hamcrest:hamcrest-all:${versions.hamcrest}"
  }
}
