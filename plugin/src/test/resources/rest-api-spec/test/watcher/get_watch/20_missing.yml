---
"Test get watch api with missing watch on existing index":
  - do:
      cluster.health:
          wait_for_status: yellow

  # ensure index exists, but ignore if it does already
  # this test should ensure the watch is missing, while the index is there
  - do:
      indices.create:
        index: .watches
        ignore: 400

  - do:
      catch: missing
      xpack.watcher.get_watch:
        id: "missing_watch"
  - match: { found : false}
  - match: { _id: "missing_watch" }

---
"Test get watch api with missing watch on missing index":
  - do:
      cluster.health:
          wait_for_status: yellow

  - do:
      indices.delete:
        index: .watches*
        ignore: 404

  - do:
      catch: missing
      xpack.watcher.get_watch:
        id: "missing_watch"
  - match: { found : false}
  - match: { _id: "missing_watch" }
