import org.elasticsearch.gradle.test.RunTask

description = 'JDBC driver for Elasticsearch'

forbiddenApisMain {
  // does not depend on core, so only jdk and http signatures should be checked
  signaturesURLs = [this.class.getResource('/forbidden/jdk-signatures.txt')]
}

dependencies {
  compile project(':x-pack-elasticsearch:sql:net-client')
  compile project(':x-pack-elasticsearch:sql:jdbc-proto')
  compile project(':x-pack-elasticsearch:sql:shared-proto')
  /* We want to limit these dependencies so do not add anything to this list
   * without serious consideration, and probably shading. */
}

dependencyLicenses {
  mapping from: /jdbc-proto.*/, to: 'elasticsearch'
  mapping from: /shared-proto.*/, to: 'elasticsearch'
  mapping from: /net-client.*/, to: 'elasticsearch'
  ignoreSha 'jdbc-proto'
  ignoreSha 'shared-proto'
  ignoreSha 'net-client'
}

jar {
  // Bundle all dependencies into the jar.
  from {
    configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) }
  }
}
