
/*
 * Messy tests that depend on groovy directly. Fix these!
 * https://github.com/elastic/x-plugins/issues/724
 */

apply plugin: 'elasticsearch.standalone-test'

dependencies {
  testCompile project(path: ':x-plugins:elasticsearch:x-pack', configuration: 'testArtifacts')
  testCompile project(path: ':modules:lang-groovy', configuration: 'runtime')
}

gradle.projectsEvaluated {
  Project groovy = project(':modules:lang-groovy')
  sourceSets.test.resources {
    srcDir groovy.pluginProperties.generatedResourcesDir
    srcDir new File(groovy.projectDir, 'src/main/plugin-metadata')
  }
  test.dependsOn groovy.pluginProperties
}
