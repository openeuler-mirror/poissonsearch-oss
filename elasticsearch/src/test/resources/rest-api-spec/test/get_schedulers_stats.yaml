setup:
  - do:
      xpack.ml.put_job:
        job_id: job-1
        body:  >
          {
            "job_id":"job-1",
            "analysis_config" : {
                "bucket_span":3600,
                "detectors" :[{"function":"count"}]
            },
            "data_description" : {
                "format":"JSON",
                "time_field":"time",
                "time_format":"epoch"
            }
          }

  - do:
      xpack.ml.put_job:
        job_id: job-2
        body:  >
          {
            "job_id":"job-2",
            "analysis_config" : {
                "bucket_span":3600,
                "detectors" :[{"function":"count"}]
            },
            "data_description" : {
                "time_field":"time"
            }
          }

  - do:
      xpack.ml.put_scheduler:
        scheduler_id: scheduler-1
        body: >
          {
            "job_id":"job-1",
            "indexes":["index-1"],
            "types":["type-1"]
          }

  - do:
      xpack.ml.put_scheduler:
        scheduler_id: scheduler-2
        body: >
          {
            "job_id":"job-2",
            "indexes":["index-2"],
            "types":["type-2"]
          }

---
"Test get scheduler stats given missing scheduler_id":

  - do:
      catch: missing
      xpack.ml.get_schedulers_stats:
        scheduler_id: missing-scheduler

---
"Test get single scheduler stats":

  - do:
      xpack.ml.get_schedulers_stats:
        scheduler_id: scheduler-1
  - match: { schedulers.0.scheduler_id: "scheduler-1"}
  - match: { schedulers.0.status: "STOPPED"}

  - do:
      xpack.ml.get_schedulers_stats:
        scheduler_id: scheduler-2
  - match: { schedulers.0.scheduler_id: "scheduler-2"}
  - match: { schedulers.0.status: "STOPPED"}

---
"Test get all schedulers stats":

  - do:
      xpack.ml.get_schedulers_stats:
        scheduler_id: _all
  - match: { count: 2 }
  - match: { schedulers.0.scheduler_id: "scheduler-1"}
  - match: { schedulers.0.status: "STOPPED"}
  - match: { schedulers.1.scheduler_id: "scheduler-2"}
  - match: { schedulers.1.status: "STOPPED"}
