setup:
  - do:
      index:
        index:  prelertresults-farequote
        type:   categoryDefinition
        id:     1
        body:   { "jobId": "farequote", "categoryId": 1 }
  - do:
      index:
        index:  prelertresults-farequote
        type:   categoryDefinition
        id:     2
        body:   { "jobId": "farequote", "categoryId": 2 }
  - do:
      index:
        index:  prelertresults-unrelated
        type:   categoryDefinition
        id:     3
        body:   { "jobId": "unrelated", "categoryId": 1 }

  - do:
      indices.refresh:
        index: prelertresults-farequote

---
"Test result categories api":
  - do:
      xpack.prelert.get_categories:
        jobId: "farequote"

  - match: { hitCount: 2 }
  - match: { hits.0.jobId: farequote }
  - match: { hits.0.categoryId: 1 }
  - match: { hits.1.jobId: farequote }
  - match: { hits.1.categoryId: 2 }

---
"Test result category api":
  - do:
      xpack.prelert.get_categories:
        jobId: "farequote"
        categoryId: "1"

  - match: { hits.0.jobId: farequote }
  - match: { hits.0.categoryId: 1 }
