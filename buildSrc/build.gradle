apply plugin: 'groovy'

buildscript {
  repositories {
    maven {
      name 'sonatype-snapshots'
      url 'http://oss.sonatype.org/content/repositories/snapshots/'
    }
  }
  dependencies {
    classpath 'org.elasticsearch.gradle:project-attachment-plugin:1.0.0-SNAPSHOT'
  }
}
apply plugin: 'elasticsearch.project-attachment'

repositories {
  mavenCentral()
  maven {
    name 'sonatype-snapshots'
    url "https://oss.sonatype.org/content/repositories/snapshots/"
  }
  jcenter()
}

dependencies {
  runtime 'org.elasticsearch.gradle:project-attachment-plugin:1.0.0-SNAPSHOT'
  runtime 'org.elasticsearch.gradle:build-tools:3.0.0-SNAPSHOT'
}

if ('elasticsearch' in attachments) {
  configurations {
    all {
      resolutionStrategy {
        dependencySubstitution {
          substitute module('org.elasticsearch.gradle:build-tools') with project(':elasticsearch')
        }
      }
    }
  }
}

