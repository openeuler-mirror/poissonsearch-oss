apply plugin: 'elasticsearch.standalone-test'
apply plugin: 'elasticsearch.vagrantsupport'

dependencies {
    testCompile project(path: ':x-pack-elasticsearch:plugin:core', configuration: 'runtime')
    testCompile project(path: ':x-pack-elasticsearch:plugin:security', configuration: 'testArtifacts')
    testCompile project(path: ':x-pack-elasticsearch:plugin:core', configuration: 'testArtifacts')
}

task openLdapFixture {
    dependsOn "vagrantCheckVersion", "virtualboxCheckVersion", ":x-pack-elasticsearch:test:openldap-fixture:up"
}

if (project.rootProject.vagrantSupported) {
  test.dependsOn openLdapFixture
  test.finalizedBy ":x-pack-elasticsearch:test:openldap-fixture:halt"
} else {
  test.enabled = false
}

namingConventions {
    // integ tests use Tests instead of IT
    skipIntegTestInDisguise = true
}
