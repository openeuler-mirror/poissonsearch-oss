setup:
  - do:
      indices.create:
        index: test-index
        body:
          settings:
            index:
              refresh_interval: "10s"

---
"Test reset index settings":
  - do:
      indices.get_settings:
        index: test-index
        flat_settings: true

  - match:
      test-index.settings.index.refresh_interval: "10s"

  - do:
      indices.put_settings:
        body:
          refresh_interval: null

  - do:
      indices.get_settings:
        flat_settings: false

  - match:
      - match: {index.settings: {}}

  - do:
      indices.get_settings:
        flat_settings: true
        defaults: true

  - match:
        test-index.settings.index.refresh_interval: "1s"

