##############
## Logstash configuration for shield load testing
##
## This configuration makes performance testing against SHIELD a lot easier
## The generator input creates 1000000 very small documents
## The elasticsearch outputs (you should choose only one!) then can be configured to use
## one of the configured setups (shield enabled/disabled, ssl enabled/disabled, HTTP or transport)
## to find out, what kind of overhead the plugin has
##
## Note: Please make sure you are using a logstash instance, that supports shield (as of 10-2014, this resided in its own branch)
##
#############
## Running the tests
## 1. Start an elasticsearch cluster using esvm (this one only starts one node): esvm shield -n 1
## 2. Start logstash against it: ../logstash-output-es-shield/build/tarball/logstash-1.4.2/bin/logstash -p ~/.esvm/1.4.0.Beta1/plugins/ agent -f src/test/resources/logstash-shield.conf
#############

input {
  generator {
    count => 1000000
  }
}

output {

  ##########
  ## HTTP
  ##########

  # Use this when shield is disabled
#  elasticsearch {
#    protocol => 'http'
#  }

  # Shield enabled, SSL disabled
  elasticsearch {
    protocol => 'http'
    # can be one of admin-plain, admin-bcrypt, admin-sha, admin-apr, admin-sha2
    user => 'admin-plain'
    password => 'changeme'
  }

  # Shield enabled, SSL enabled
#  elasticsearch {
#    protocol => 'http'
#    user => 'admin'
#    password => 'changeme'
#    ssl => 'true'
#    ssl_verify => false
#  }



  ##########
  ## Transport Client
  ##########

  # Use this when shield is disabled
#  elasticsearch {
#    protocol => 'transport'
#  }

  # Shield enabled, SSL disabled
#  elasticsearch {
#    protocol => 'transport'
#    user => 'admin'
#    password => 'changeme'
#  }

  # Shield enabled, SSL enabled
#  elasticsearch {
#    protocol => 'transport'
#    user => 'admin'
#    password => 'changeme'
#    ssl => 'true'
#    keystore => 'src/test/resources/org/elasticsearch/shield/transport/ssl/certs/simple/testclient.jks'
#    keystore_password => 'testclient'
#    truststore => 'src/test/resources/org/elasticsearch/shield/transport/ssl/certs/simple/testclient.jks'
#    truststore_password => 'testclient'
#  }
}

